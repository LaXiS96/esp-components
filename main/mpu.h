#pragma once

#define MPU_I2C_PORT_NUM I2C_NUM_0
#define MPU_I2C_ADDR 0x68
#define MPU_SAMPLE_RATE 200 // Fixed at 200Hz when using DMP
#define MPU_DMP_CHUNK_SIZE 16
#define MPU_DMP_FIFO_RATE 9 // Must be lower than MPU_SAMPLE_RATE (also at least 1 lower than poll rate)

#define MPU_BANK_SIZE 256
#define MPU_DMP_MEM_START_ADDR 0x0400
#define MPU_GYRO_SF (46850825LL * 200 / MPU_SAMPLE_RATE)
#define MPU_QUAT_SENS 1073741824.0F

#define MPU_REG_SMPLRT_DIV 0x19
#define MPU_REG_CONFIG 0x1A
#define MPU_REG_GYRO_CONFIG 0x1B
#define MPU_REG_ACCEL_CONFIG 0x1C
#define MPU_REG_FIFO_EN 0x23
#define MPU_REG_INT_ENABLE 0x38
#define MPU_REG_INT_STATUS 0x3A
#define MPU_REG_USER_CTRL 0x6A
#define MPU_REG_PWR_MGMT_1 0x6B
#define MPU_REG_PWR_MGMT_2 0x6C
#define MPU_REG_BANK_SEL 0x6D
#define MPU_REG_MEM_RW 0x6F
#define MPU_REG_PRGM_START_H 0x70
#define MPU_REG_FIFO_COUNT_H 0x72
#define MPU_REG_FIFO_RW 0x74

#define MPU_BIT_INT_STATUS_FIFO_OVERFLOW 0x10
#define MPU_BIT_USER_CTRL_FIFO_EN 0x40
#define MPU_BIT_USER_CTRL_DMP_EN 0x80
#define MPU_BIT_USER_CTRL_FIFO_RST 0x04
#define MPU_BIT_USER_CTRL_DMP_RST 0x08

#define MPU_DMP_D_0_22 (22 + 512)
#define MPU_DMP_D_0_104 104
#define MPU_DMP_CFG_MOTION_BIAS 1208
#define MPU_DMP_CFG_ANDROID_ORIENT_INT 1853
#define MPU_DMP_CFG_20 2224
#define MPU_DMP_CFG_LP_QUAT 2712
#define MPU_DMP_CFG_8 2718
#define MPU_DMP_CFG_GYRO_RAW_DATA 2722
#define MPU_DMP_CFG_15 2727
#define MPU_DMP_CFG_27 2742
#define MPU_DMP_CFG_6 2753

void mpuInit(void);
void mpuDmpTest(void);
